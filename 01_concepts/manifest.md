# 매니페스트(Manifest) 파일 이해하기

쿠버네티스에서 오브젝트를 생성하고 관리할 때 사용하는 **매니페스트(Manifest) 파일**에 대해 알아봅니다.

## 1. 매니페스트(Manifest) 파일이란?

쿠버네티스에게 **"내가 원하는 상태(Desired State)"**가 무엇인지 알려주는 일종의 **설계도** 또는 **명세서**입니다. 주로 **YAML** 형식을 사용하여 작성하며, 쿠버네티스 클러스터에 이 파일을 제출(`kubectl apply`)하면 쿠버네티스가 그 내용에 맞춰 리소스를 생성하고 유지합니다.

- **파일 형식**: 주로 `.yaml` 또는 `.yml` 확장자를 사용합니다.
- **역할**: "어떤 이미지를 사용할 것인가?", "포트는 몇 번을 쓸 것인가?", "이름은 무엇인가?" 등을 정의합니다.

---

## 2. 왜 매니페스트 파일을 쓰나요? (선언적 방식)

쿠버네티스에는 두 가지 관리 방식이 있습니다.

### ① 명령형 방식 (Imperative)
명령어를 직접 하나하나 내리는 방식입니다.
> 예: "쿠버네티스야, nginx 이미지로 파드 하나 만들어줘."
> `kubectl run nginx --image=nginx`

- **단점**: 복잡한 설정을 관리하기 어렵고, 나중에 어떤 설정을 했는지 기록이 남지 않습니다.

### ② 선언적 방식 (Declarative) - 매니페스트 사용
내가 원하는 최종 결과물을 파일에 적어두고 제출하는 방식입니다.
> 예: "이 파일에 적힌 상태가 내 서버의 최종 모습이야. 이대로 만들어줘."
> `kubectl apply -f nginx-pod.yaml`

- **장점**:
    - **버전 관리 가능**: Git 같은 곳에 저장해서 변경 이력을 관리할 수 있습니다 (Infrastructure as Code, IaC).
    - **재사용성**: 똑같은 환경을 다른 클러스터에 그대로 다시 만들 수 있습니다.
    - **협업 용이**: 설계도를 공유하면 팀원 누구나 동일한 인프라를 이해하고 구축할 수 있습니다.

---

## 3. 매니페스트 파일의 필수 4요소

모든 쿠버네티스 매니페스트 파일은 아래 4가지 항목을 기본적으로 포함해야 합니다.

| 항목 | 의미 | 내용 |
| :--- | :--- | :--- |
| **apiVersion** | API 버전 | 이 오브젝트를 생성하기 위해 사용할 쿠버네티스 API 버전 (예: v1, apps/v1) |
| **kind** | 오브젝트 종류 | 어떤 종류의 리소스를 만들 것인지 (예: Pod, Service, Deployment) |
| **metadata** | 메타데이터 | 오브젝트의 이름, 라벨(Label), 네임스페이스 등 식별 정보 |
| **spec** | 상세 명세 | **[가장 중요]** 내가 원하는 리소스의 구체적인 상태 (이미지, 포트, 복제본 수 등) |

---

## 4. 비유로 이해하기

매니페스트 파일은 **레고 설명서**나 **밀키트 조리법**과 같습니다.

- **레고**: 상자 안에 설명서(매니페스트)가 있고, 우리는 그 설명서대로 레고를 조립합니다.
- **쿠버네티스**: 우리는 YAML 파일(매니페스트)을 작성하고, 쿠버네티스는 그 설명서대로 컨테이너를 조립하여 띄웁니다.

이제 우리가 실습했던 `nginx-pod.yaml`이 바로 이 **매니페스트 파일**이었음을 알 수 있습니다!
